(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{1018:function(e,t,n){"use strict";function r(e){return e.$auth.$state.loggedIn?"default":"public/public"}n.d(t,"a",(function(){return r}))},1019:function(e,t,n){var content=n(1029);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("460a5d95",content,!0,{sourceMap:!1})},1021:function(e,t,n){var content=n(1033);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("82de46c8",content,!0,{sourceMap:!1})},1026:function(e,t,n){"use strict";n(18),n(16),n(14),n(22),n(15),n(23);var r=n(0),o=n(1);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l=Object(o.defineComponent)({props:{name:{type:String,default:"text"},label:{type:String,default:void 0},placeholder:{type:String,default:"Type it here"},inputType:{type:String,default:"text"},value:{type:String,default:void 0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1},isRequired:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0}},setup:function(e,t){var n=Object(o.reactive)({isFocused:!1});return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({setValue:function(e){t.emit("input",e)},onFocus:function(e){n.isFocused=!0,t.emit("focus",e)},onBlur:function(e){t.emit("blur",e),n.isFocused=!1},onEnterPressed:function(){t.emit("enterPressed")}},Object(o.toRefs)(n))}}),d=(n(1028),n(2)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-input flex flex-col input-placeholder-color",class:{"text-input--focused":e.isFocused,"text-input--disabled":e.disabled,"text-input--readonly":e.readonly}},[n("label",{directives:[{name:"show",rawName:"v-show",value:e.label,expression:"label"}],staticClass:"text-input__label text-sm pb-2",class:{"input-disabled":e.disabled},attrs:{for:e.name}},[n("span",[e._v(e._s(e.label))]),e._v(" "),n("span",[e._v(e._s(e.isRequired&&e.label?" *":""))])]),e._v(" "),n("div",{staticClass:"text-input__input-wrapper flex flex-col input-focus-outline",class:{"input-focus-outline--focus-active":e.isFocused&&!e.disabled&&!e.readonly,"input-focus-outline--hover-active":!e.disabled&&!e.readonly,"input-focus-outline--has-errors":e.hasErrors}},[n("input",{staticClass:"text-input__input-wrapper__input px-4 py-3 rounded bg-neutral-150",class:{"input-disabled":e.disabled},attrs:{id:e.name,type:e.inputType,name:e.name,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,autocomplete:e.autocomplete?"on":"off"},domProps:{value:e.value},on:{input:function(t){return e.setValue(t.target.value)},focus:e.onFocus,blur:e.onBlur,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnterPressed(t)}}}),e._v(" "),e._t("customTextInputButton")],2)])}),[],!1,null,"2d955214",null);t.a=component.exports},1027:function(e,t,n){"use strict";var r=n(1),o=n(31),c=n(221),l=Object(r.defineComponent)({components:{AppButton:o.a,CircularLoader:c.a},props:{disabled:{type:Boolean,default:!1},actionInProgress:{type:Boolean,default:!1}},setup:function(e,t){return{activateAsyncAction:function(n){e.actionInProgress||t.emit("click",n)}}}}),d=(n(1032),n(2)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-button",{class:{"pointer-events-none":e.actionInProgress},attrs:{disabled:e.disabled},on:{click:e.activateAsyncAction}},[n("circular-loader",{directives:[{name:"show",rawName:"v-show",value:e.actionInProgress,expression:"actionInProgress"}],staticStyle:{position:"absolute"},attrs:{size:1.5}}),e._v(" "),n("span",{class:{invisible:e.actionInProgress}},[e._t("default")],2)],1)}),[],!1,null,"1cbfafa6",null);t.a=component.exports},1028:function(e,t,n){"use strict";n(1019)},1029:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.text-input__input-wrapper__input[data-v-2d955214]{\n  transition:background-color .1s ease-in-out\n}\n.text-input--focused:not(.text-input--readonly) .text-input__input-wrapper__input[data-v-2d955214], .text-input:not(.text-input--readonly):not(.text-input--disabled) .text-input__input-wrapper:hover .text-input__input-wrapper__input[data-v-2d955214]{\n  --tw-bg-opacity:1;\n  background-color:rgba(255, 255, 255, var(--tw-bg-opacity))\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},1032:function(e,t,n){"use strict";n(1021)},1033:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n[data-v-1cbfafa6] .circular-loader{\n  position:absolute;\n  left:50%;\n  top: 50%;\n  transform:translate(-50%, -50%)\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},1148:function(e,t,n){var content=n(1224);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("5ae03750",content,!0,{sourceMap:!1})},1223:function(e,t,n){"use strict";n(1148)},1224:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.gift-card-header[data-v-6fa89b68]{\n  min-height:20rem\n}\n.gift-card-header__partial-logo[data-v-6fa89b68]{\n  left:35%;\n  top:10%;\n  filter:brightness(.5)\n}\n@media(min-width:600px){\n.gift-card-header__partial-logo[data-v-6fa89b68]{\n    top:-40%;\n    transform:scale(.7)\n}\n}\n@media(min-width:800px){\n.gift-card-header__partial-logo[data-v-6fa89b68]{\n    left:40%;\n    top:-50%\n}\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},1265:function(e,t,n){"use strict";var r=n(1),o=n(62),c=Object(r.defineComponent)({props:{title:{type:String,default:void 0},description:{type:String,default:void 0}},setup:function(e,t){return{ImageAssetEnum:o.a}}}),l=(n(1223),n(2)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gift-card-header flex flex-col bg-bluelagoon-300 relative overflow-hidden z-0 justify-end pl-4 pb-10 md:pl-18 md:pb-18"},[n("h1",{staticClass:"text-left font-bold text-white text-4.5xl md:text-4xl mb-6 mt-12 sm:mt-8 md:mt-4 relative z-10"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),n("p",{staticClass:"header-hero__header-description text-white text-left text-lg md:w-3/6 opacity-80 relative z-10 w-2/3"},[e._v("\n    "+e._s(e.description)+"\n  ")]),e._v(" "),n("img",{staticClass:"absolute gift-card-header__partial-logo pointer-events-none",attrs:{src:e.ImageAssetEnum.PUBLIC_PARTIAL_LOGO_BOTTOM}})])}),[],!1,null,"6fa89b68",null);t.a=component.exports},1339:function(e,t,n){var content=n(1558);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("0f885e8e",content,!0,{sourceMap:!1})},1340:function(e,t,n){var content=n(1560);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("8fe41c4a",content,!0,{sourceMap:!1})},1557:function(e,t,n){"use strict";n(1339)},1558:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.gift-card-voucher-input[data-v-a6159aae]{\n  max-width:33rem\n}\n.gift-card-voucher-input[data-v-a6159aae]  .text-input__input-wrapper__input{\n  --tw-bg-opacity:1;\n  background-color:rgba(255, 255, 255, var(--tw-bg-opacity))\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},1559:function(e,t,n){"use strict";n(1340)},1560:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.redeem-gift-card__voucher-input-wrapper[data-v-36c65276]{\n  height:30rem\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},1992:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(8),c=(n(41),n(18),n(16),n(14),n(22),n(15),n(23),n(37),n(1)),l=n(1018),d=n(1265),f=n(1026),v=n(1027);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var h=Object(c.defineComponent)({components:{TextInput:f.a,AsyncButton:v.a},props:{name:{type:String,default:"gift-card-voucher-input"},placeholder:{type:String,default:""},actionInProgress:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},setup:function(e,t){var n=Object(c.reactive)({voucherCode:""});return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({submitVoucherCode:function(){t.emit("voucherCodeSubmit",n.voucherCode)}},Object(c.toRefs)(n))}}),_=(n(1557),n(2)),x=Object(_.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"gift-card-voucher-input flex flex-col justify-center items-center bg-neutral-150 px-8 w-full sm:px-14 py-10 sm:py-12",on:{submit:function(t){return t.preventDefault(),e.submitVoucherCode(t)}}},[n("label",{staticClass:"text-neutral-500 font-bold opacity-80 text-1.4xl mb-8 w-full text-left",attrs:{for:e.name}},[e._v("\n    "+e._s(e.$t("voucher_input.title"))+"\n  ")]),e._v(" "),n("text-input",e._b({staticClass:"mb-10 sm:mb-6 w-full",model:{value:e.voucherCode,callback:function(t){e.voucherCode=t},expression:"voucherCode"}},"text-input",{name:e.name,placeholder:e.placeholder,readonly:e.readonly},!1)),e._v(" "),n("async-button",e._b({staticClass:"primary w-full",attrs:{type:"submit"}},"async-button",{actionInProgress:e.actionInProgress},!1),[e._v("\n    "+e._s(e.$t("common.continue"))+"\n  ")]),e._v(" "),n("div",{staticClass:"hidden sm:block font-body mt-4 text-smaller text-center",domProps:{innerHTML:e._s(e.$t("voucher_input.info"))}})],1)}),[],!1,null,"a6159aae",null).exports,y=n(31),w=n(3);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I=Object(c.defineComponent)({components:{GiftCardVoucherInput:x,AppButton:y.a,AsyncButton:v.a,GiftCardHeader:d.a},layout:l.a,middleware:[function(e){e.$auth.loggedIn?e.app.$accessor.SET_DISPLAY_DETAIL_HEADER(!1):e.app.$accessor.SET_DISPLAY_DETAIL_HEADER(!0),e.app.$accessor.SET_CONTENT_IS_LOADING(!1)}],auth:!1,props:{},setup:function(e,t){var n=Object(c.reactive)({actionInProgress:!1,invalidVoucher:!1,redeemSuccess:!1,voucherSubmitErrorMessage:"",userIsLoggedIn:t.root.$auth.loggedIn,voucherCode:"",voucherInfo:{},subscriptionDto:{},formatedSubscriptionValidationDate:"n/a"}),r=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=29;break}return e.prev=1,n.actionInProgress=!0,n.invalidVoucher=!1,n.voucherSubmitErrorMessage="",e.next=7,t.root.$repositories.giftCardsRepository.getActiveGiftCardByCode(r);case 7:if(!(o=e.sent)){e.next=18;break}if("Active"===o.giftCard.giftCardStatus){e.next=11;break}throw new Error("Invalid gift card voucher");case 11:n.voucherCode=r,n.voucherInfo.code=o.giftCard.giftCardCode||r,n.voucherInfo.duration=o.giftCard.duration+" "+o.giftCard.durationUnit+(o.giftCard.duration>1?"s":""),n.voucherInfo.senderName=o.giftCardForm.senderFirstName||" "+o.giftCardForm.senderLastName||"",n.voucherInfo.senderMessage=o.giftCardForm.giftCardMessage,e.next=19;break;case 18:throw new Error("Invalid response from server.");case 19:e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),t.root.$handleErrorGlobally({error:e.t0,message:e.t0.message},{notify:!0}),n.invalidVoucher=!0,e.t0.message&&500!==e.t0.statusCode&&(n.voucherSubmitErrorMessage=e.t0.message);case 26:return e.prev=26,n.actionInProgress=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,21,26,29]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.actionInProgress=!0,n.invalidVoucher=!1,n.voucherSubmitErrorMessage="",e.next=6,t.root.$repositories.giftCardsRepository.redeemGiftCard(n.voucherCode);case 6:if(null==(r=e.sent)||!r.validUntil){e.next=13;break}n.redeemSuccess=!0,n.subscriptionDto=r,n.formatedSubscriptionValidationDate=new Date(null==r?void 0:r.validUntil).toLocaleDateString(),e.next=14;break;case 13:throw new Error("Invalid response from server.");case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),t.root.$handleErrorGlobally({error:e.t0,message:e.t0.message},{notify:!0}),n.invalidVoucher=!0,e.t0.message&&(n.voucherSubmitErrorMessage=e.t0.message);case 21:return e.prev=21,n.actionInProgress=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,16,21,24]])})));return function(){return e.apply(this,arguments)}}();return Object(c.onMounted)((function(){var code=t.root.$route.query.code;code&&r(String(code))})),O(O({},Object(c.toRefs)(n)),{},{onVoucherCodeSubmit:r,redeemCode:l,onSignIn:function(){t.root.$router.push({path:w.a.LOGIN,query:{r:"".concat(w.a.REDEEM_GIFT_CARD,"?code=").concat(n.voucherCode)}})},onJoin:function(){t.root.$router.push({path:w.a.REGISTER,query:{r:"".concat(w.a.REDEEM_GIFT_CARD,"?code=").concat(n.voucherCode)}})},goToPage:function(e){t.root.$router.push(e)},rootRoutesEnum:w.a})}}),j=(n(1559),Object(_.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"redeem-gift-card flex flex-col items-center h-full w-full"},[e.userIsLoggedIn?n("gift-card-header",{staticClass:"w-full",attrs:{title:"Redeem Gift Card",description:"Welcome to EkhartYoga! We look forward to practicing with you."}}):e._e(),e._v(" "),e.voucherInfo.code?e._e():n("div",{staticClass:"redeem-gift-card__voucher-input-wrapper flex flex-col items-center justify-start"},[n("div",{staticClass:"bg-red-400 text-white w-full sm:w-6/12 py-5 px-6 mb-4 mt-6 sm:mt-16",class:[e.invalidVoucher?"visible":"invisible"]},[e._v("\n      "+e._s(e.voucherSubmitErrorMessage||e.$t("voucher_input.invalid"))+"\n    ")]),e._v(" "),n("gift-card-voucher-input",{staticClass:"sm:w-auto",attrs:{"action-in-progress":e.actionInProgress,readonly:e.actionInProgress},on:{voucherCodeSubmit:e.onVoucherCodeSubmit}})],1),e._v(" "),e.voucherInfo.code&&!e.redeemSuccess?n("div",{staticClass:"redeem-gift-card__success-screen flex flex-col items-center text-center w-full md:w-3/6 p-4 md:p-8 xl:p-16"},[n("h1",{staticClass:"text-bluelagoon-400 text-3.5xl md:text-4xl font-bold mb-4"},[e._v("\n      "+e._s(e.voucherInfo.duration)+" EkhartYoga gift voucher from "+e._s(e.voucherInfo.senderName)+"\n    ")]),e._v(" "),n("p",{staticClass:"font-heading text-neutral-450 text-2.5xl font-bold mb-4"},[e._v("\n      Code: "+e._s(e.voucherInfo.code)+"\n    ")]),e._v(" "),e.userIsLoggedIn?n("p",{staticClass:"font-heading text-neutral-450 text-2.5xl font-bold mb-4"},[e._v("\n      You've been given a free membership with EkhartYoga.\n    ")]):n("p",{staticClass:"font-heading text-neutral-450 text-2.5xl font-bold mb-4"},[e._v("\n      You've been given a free membership with EkhartYoga. Please sign in or create an account to redeem your gift and start your home practice with us.\n    ")]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.voucherInfo.senderMessage,expression:"voucherInfo.senderMessage"}],staticClass:"text-neutral-450 text-2xl mb-8"},[e._v('\n      " '+e._s(e.voucherInfo.senderMessage)+'"\n    ')]),e._v(" "),e.userIsLoggedIn?n("div",{staticClass:"w-full"},[n("async-button",e._b({staticClass:"primary w-full mt-8",on:{click:e.redeemCode}},"async-button",{actionInProgress:e.actionInProgress},!1),[e._v("\n        Redeem code\n      ")])],1):n("div",[n("app-button",{staticClass:"outline mt-8",on:{click:e.onSignIn}},[e._v("\n        "+e._s(e.$t("account.sign_in"))+"\n      ")]),e._v(" "),n("app-button",{staticClass:"primary mt-8",on:{click:e.onJoin}},[e._v("\n        "+e._s(e.$t("account.join_us"))+"\n      ")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.invalidVoucher,expression:"invalidVoucher"}],staticClass:"bg-red-400 text-white w-full sm:w-6/12 py-5 px-6 mt-6"},[e._v("\n      "+e._s(e.voucherSubmitErrorMessage||e.$t("voucher_input.invalid"))+"\n    ")])]):e._e(),e._v(" "),e.redeemSuccess?n("div",{staticClass:"flex flex-col items-center text-center w-full md:w-3/6 p-4 md:p-8 xl:p-16"},[n("h1",{staticClass:"text-bluelagoon-400 text-3.5xl md:text-4xl font-bold mb-4"},[e._v("\n      Congratulations\n    ")]),e._v(" "),n("p",{staticClass:"text-neutral-450 mb-4"},[e._v("\n      You now have an EkhartYoga subscription until "+e._s(e.formatedSubscriptionValidationDate)+"\n    ")]),e._v(" "),n("div",[n("app-button",{staticClass:"outline mt-8",on:{click:function(t){return e.goToPage(e.rootRoutesEnum.ACCOUNT_SETTINGS)}}},[e._v("\n        "+e._s(e.$t("account.settings"))+"\n      ")]),e._v(" "),n("app-button",{staticClass:"primary mt-8",on:{click:function(t){return e.goToPage(e.rootRoutesEnum.HOME)}}},[e._v("\n        "+e._s(e.$t("common.start_practicing"))+"\n      ")])],1)]):e._e()],1)}),[],!1,null,"36c65276",null));t.default=j.exports}}]);