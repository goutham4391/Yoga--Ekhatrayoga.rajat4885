(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{1146:function(e,t,o){"use strict";var r;o.d(t,"a",(function(){return r})),function(e){e.ACCESS_TOKEN="identity_access_token",e.ID_TOKEN="identity_id_token"}(r||(r={}))},1313:function(e,t,o){var content=o(1500);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(20).default)("df41efa2",content,!0,{sourceMap:!1})},1499:function(e,t,o){"use strict";o(1313)},1500:function(e,t,o){var r=o(19)((function(i){return i[1]}));r.push([e.i,"/*purgecss start ignore*/\n.classes-id-index-slug[data-v-f14e4c4c]  .description-link a{\n  --tw-text-opacity:1;\n  color:rgba(12, 100, 111, var(--tw-text-opacity))\n}\n\n/*purgecss end ignore*/",""]),e.exports=r},2008:function(e,t,o){"use strict";o.r(t);o(22),o(15),o(23);var r=o(57),n=o(0),c=o(32),l=o(8),d=(o(16),o(65),o(88),o(36),o(49),o(18),o(99),o(14),o(89),o(38),o(82),o(37),o(1)),f=o(1971),h=o(95),v=o(117),m=o(1178),y=o(3),O=o(1045),C=o(128),w=o(9),j=o(385),I=o(35),E=o(225),$=o(222),S=o(162);function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D=Object(d.defineComponent)({components:{ClassDetailPage:f.a},middleware:[function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(t){var o,r,n,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.app.$accessor.SET_CONTENT_IS_LOADING(!0),e.next=4,t.app.$accessor.classes.detail.fetch({currentRoute:t.route});case 4:if(t.app.$accessor.SET_CONTENT_IS_LOADING(!1),t.app.$accessor.SET_DISPLAY_DETAIL_HEADER(!0),(r=t.app.$accessor.classes.detail.dto).alias===t.route.params.slug){e.next=9;break}throw new Error("Received invalid detail object: "+JSON.stringify(r));case 9:n=Object(v.e)([r],t.app.$dayjs,null==t||null===(o=t.$auth)||void 0===o?void 0:o.loggedIn),l=Object(c.a)(n,1),d=l[0],Object(v.d)(r,{useHandlers:!0,optionsForRoute:y.a.CLASSES,cardItem:d},{$auth:t.app.$auth,$accessor:t.app.$accessor}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.error({statusCode:404,message:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()],props:{},setup:function(e,t){var o=Object(d.computed)((function(){return t.root.$route.params.slug})),r=P(t);return{teacher:r.teacher,commentSystemConfig:r.commentSystemConfig,cardList:r.cardList,description:r.description,tags:r.tags,videoClass:r.videoClass,slug:o,onBackBtnClick:r.onBackBtnClick,detailHeaderConfig:r.detailHeaderConfig,onTeacherFollow:r.onTeacherFollow,onChatToggle:r.onChatToggle,onJumpToNew:r.onJumpToNew,chatIsOpened:r.chatIsOpened,videoPlayerConfig:r.videoPlayerConfig,onDownloadClass:r.onDownloadClass,toDownloadClass:r.toDownloadClass,shouldHideDownloadBtn:r.shouldHideDownloadBtn,loggedIn:r.loggedIn}},head:function(){var e,t,o,r,n=Object(S.a)(this),c=null===(e=this.$accessor)||void 0===e||null===(t=e.classes)||void 0===t||null===(o=t.detail)||void 0===o?void 0:o.dto,l=(null===(r=this.$config)||void 0===r?void 0:r.baseUrl)||"https://www.ekhartyoga.com",path=this.$route.path,d=null==c?void 0:c.metaTitle,f=Object($.stripHtml)((null==c?void 0:c.metaDescription)||"").result,title=null==c?void 0:c.title,desc=Object($.stripHtml)((null==c?void 0:c.description)||"").result,v=Object(w.g)(null==c?void 0:c.media),m=null==c?void 0:c.tagCategories,y="";null!=m&&m.length&&(y=Object(h.c)(m).map((function(e){return e.name})).join(", "));return k(k({},n),{},{title:d||title||"",titleTemplate:"%s | Ekhart Yoga",meta:[{hid:"og:title",property:"og:title",content:(d||title)+" | Ekhart Yoga"},{hid:"og:description",property:"og:description",content:f||desc||""},{hid:"description",name:"description",content:f||desc||""},{hid:"og:url",property:"og:url",content:l+path||""},{hid:"og:image",property:"og:image",content:v},{hid:"og:image:width",property:"og:image:width",content:"1280"},{hid:"og:image:height",property:"og:image:height",content:"720"},{hid:"keywords",name:"keywords",content:y}]})}}),P=function(e){var t=Object(d.reactive)({cardListLoading:!0,videoPlayerConfig:{videoEntryId:"",playerId:"",partnerId:"",serviceUrl:"",kalturaMergeFlashvars:{"EmbedPlayer.EnableIpadHTMLControls":!1,"EmbedPlayer.iPhoneShowHTMLPlayScreen":!1,"EmbedPlayer.DisableContextMenu":!0,"EmbedPlayer.WebKitPlaysInline":!1},videoStartProgress:0},teacher:{teacherId:"",teacherName:"",teacherImg:{src:"",alt:"media image",width:"128",height:"128"}},commentSystemConfig:{title:"",commentUrl:"",apiUrl:"",token:"",params:{referenceSection:"",referenceId:"",skipCount:0,maxResultCount:5}},cardList:{title:"You might also likeâ€¦",buttonTitle:"",list:[]},description:"",tags:[],currentVideoClass:{}}),o=function(){var o=Object(l.a)(regeneratorRuntime.mark((function o(n){var c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c={video:{}},o.next=3,e.root.$repositories.classes.getVideoClassDownloadUrls(t.currentVideoClass.id);case 3:(l=o.sent).result&&l.result.length&&(c.video.downloadUrls=Object(r.a)(l.result)),c=k(k({},t.currentVideoClass.dto),c),t.currentVideoClass.dto=c,R(n,t.currentVideoClass);case 8:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),n=Object(d.computed)((function(){var t,o,r,n,l,d,f,h,m=null==e||null===(t=e.root)||void 0===t||null===(o=t.$auth)||void 0===o?void 0:o.loggedIn,y=null===(r=e.root)||void 0===r||null===(n=r.$auth)||void 0===n||null===(l=n.user)||void 0===l?void 0:l.hasLegacyDownloads,O=null==e||null===(d=e.root)||void 0===d?void 0:d.$accessor.classes.detail.dto,C={};if(Object.keys(O).length){var w=Object(v.e)([O],e.root.$dayjs,m);C=Object(c.a)(w,1)[0]}return!y||null===(f=C)||void 0===f||null===(h=f.dto)||void 0===h||!h.video.downloadUrls.length})),f=Object(d.computed)((function(){var t,o;return null==e||null===(t=e.root)||void 0===t||null===(o=t.$auth)||void 0===o?void 0:o.loggedIn})),$=Object(j.a)(e).userIsSubscriber,S=Object(d.computed)((function(){return e.root.$accessor.detailHeader.config})),T=Object(d.computed)((function(){return e.root.$accessor.classes.detail.sessionId})),D=Object(m.a)(e).getConfig,P=Object(O.a)(e).toggleFollowTeacher,_=Object(d.computed)((function(){return e.root.$accessor.classes.detail.dto})),R=Object(E.a)(e).onDownloadClass,L=function(){var o=Object(l.a)(regeneratorRuntime.mark((function o(r){var n,c,l,d,f,h,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t.teacher.actionInProgress=!0,c=null!==(n=_.value.teachers)&&void 0!==n&&n.length?_.value.teachers:[],o.next=5,P(r,_.value);case 5:l=o.sent,c.length&&((d=k({},c[0])).following=null==l?void 0:l.following,f=Object(C.g)(c,d),h={teachers:f},e.root.$accessor.classes.detail.dto.id===_.value.id&&(console.log("Update video class with teacher preferences",h),e.root.$accessor.classes.detail.updateItem(h))),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),"function"==typeof(null==e||null===(v=e.root)||void 0===v?void 0:v.$handleErrorGlobally)&&e.root.$handleErrorGlobally({message:null===o.t0||void 0===o.t0?void 0:o.t0.message,error:o.t0},{notify:!0,errorType:I.a.TEACHER_PREFERENCE_UPDATE});case 12:return o.prev=12,t.teacher.actionInProgress=!1,o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[0,9,12,15]])})));return function(e){return o.apply(this,arguments)}}(),x=Object(d.ref)(!1);Object(d.watch)(_,(function(o,r){if(o){var n,l,d=null==e||null===(n=e.root)||void 0===n||null===(l=n.$auth)||void 0===l?void 0:l.loggedIn,f=Object(v.b)(o);f.hideSlot=!d,t.teacher=f;var m=Object(v.e)([o],e.root.$dayjs,d),O=Object(c.a)(m,1)[0];t.currentVideoClass=O,Object(v.d)(o,{useHandlers:!0,optionsForRoute:y.a.CLASSES,cardItem:O},{$auth:e.root.$auth,$accessor:e.root.$accessor}),t.description=o.description||"";var C=Object(h.c)(o.tagCategories).filter((function(e,t,o){return o.findIndex((function(t){return JSON.stringify(t.name)===JSON.stringify(e.name)}))===t})),I=Object(h.g)(C),E=Object(h.i)(I);t.tags=E,t.commentSystemConfig=D(o.title||o.alias||o.id,{referenceSection:"VideoClass",referenceId:o.id});var $=Object(j.a)(e).userId,S=Object(w.e)(k(k({},o.video),{kalturaSession:T.value}),e.root.$config,$.value,_.value);S&&(t.videoPlayerConfig=S,t.videoPlayerConfig.pricingUrl=e.root.$config.baseUrl+y.a.PRICING,t.videoPlayerConfig.registerUrl=e.root.$config.baseUrl+y.a.REGISTER)}o&&r&&(null==o?void 0:o.id)!==(null==r?void 0:r.id)&&N()}),{immediate:!0});var N=function(){var o=Object(l.a)(regeneratorRuntime.mark((function o(){var r,n,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t.cardList.listIsLoading=!0,n=e.root.$repositories.classes,o.next=5,n.getRecommededClasses(t.currentVideoClass.id);case 5:null!=(c=o.sent)&&null!==(r=c.items)&&void 0!==r&&r.length&&(t.cardList.list=Object(v.e)(c.items,e.root.$dayjs,!1).map((function(e){return e.minWidth="14rem",e}))),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(0),e.root.$handleErrorGlobally({message:o.t0.message,error:o.t0},{notify:!0,errorType:I.a.RECOMMENDED_CLASSES_FETCH}),t.cardList.list=[];case 13:return o.prev=13,t.cardList.listIsLoading=!1,o.finish(13);case 16:case"end":return o.stop()}}),o,null,[[0,9,13,16]])})));return function(){return o.apply(this,arguments)}}();return Object(d.onMounted)((function(){N();var t=e.root.$route.query;t.code&&(f.value&&$.value&&e.root.$router.replace({}),(!f.value||f.value&&!$.value)&&e.root.$repositories.classes.checkIfClassIsRedeemable(t.code).then((function(o){var r=o.isRedeemable,n=o.isValid;if(r)e.root.$router.push({path:y.a.PRICING,query:t});else if(!r||!n){var c={message:"",code:500};e.root.$handleErrorGlobally({message:null==c?void 0:c.message,error:c},{notify:!0,errorType:n&&!r?I.a.GIFT_CLASS_ALREADY_REDEEMED:I.a.GIFT_CLASS_INVALID_CODE})}})).catch((function(t){e.root.$handleErrorGlobally({message:null==t?void 0:t.message,error:t},{notify:!0})})));e.root.$route.query.comment&&function(){if(document){var e=document.querySelector(".comments-wrapper");e&&setTimeout((function(){var t=e.getBoundingClientRect().top+window.pageYOffset+-90;window.scrollTo({top:t,behavior:"smooth"});var o=e.querySelector("textarea");o&&o.focus()}),50)}}()})),k(k({},Object(d.toRefs)(t)),{},{detailHeaderConfig:S,videoClass:_,onBackBtnClick:function(){return Object(w.h)(e)},onTeacherFollow:L,onChatToggle:function(e){x.value=e||!x.value,console.log("chat opened ? ",x.value)},onJumpToNew:function(){var e=document.querySelector(".chat__message-area");null==e||e.scrollTo({top:0,left:0,behavior:"smooth"})},onDownloadClass:R,toDownloadClass:o,shouldHideDownloadBtn:n,loggedIn:f,chatIsOpened:x,userIsSubscriber:$})},_=D,R=(o(1499),o(2)),component=Object(R.a)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"classes-id-index-slug"},[o("class-detail-page",{attrs:{"video-player-config":e.videoPlayerConfig,"teacher-config":e.teacher,"comment-system-config":e.commentSystemConfig,"cards-config":e.cardList,"detail-header-config":e.detailHeaderConfig,description:e.description,tags:e.tags,"hide-header-on-large-screens":e.$auth&&e.$auth.loggedIn,"should-hide-download-btn":e.shouldHideDownloadBtn,"chat-is-opened":e.chatIsOpened,"logged-in":e.loggedIn},on:{onTeacherFollow:e.onTeacherFollow,backBtnClick:e.onBackBtnClick,classDetailDownloadClick:e.toDownloadClass,toggleChat:e.onChatToggle,jumpToNew:e.onJumpToNew}})],1)}),[],!1,null,"f14e4c4c",null);t.default=component.exports}}]);